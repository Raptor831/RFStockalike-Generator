!function(s){function e(){s(window).width()>600&&(s("#primary-navigation .menu").removeAttr("style"),s("#mobile-menu-button").removeClass("has-open"))}function n(){e()}function r(){s(document).click(function(e){if(-1==s(e.target).parents().index(s("#primary-navigation"))&&-1==s(e.target).parents().index(s("#mobile-menu-button"))){s(".has-open").length>0&&s(".menu-item-has-children.has-open .sub-menu").fadeOut(100).parent(".has-open").removeClass("has-open");var n=s("#mobile-menu-button");n.hasClass("has-open")&&(s("ul#menu-primary-navigation").fadeOut(100),n.removeClass("has-open"))}}),s(".menu-item-has-children > a").click(function(e){e.preventDefault(),s(this).siblings(".sub-menu").fadeToggle(100),s(this).parent().siblings(".menu-item-has-children.has-open").each(function(){s(this).removeClass("has-open").find(".sub-menu").fadeOut(100),s(this).find(".menu-item-has-children.has-open").removeClass("has-open")}),s(this).parent().toggleClass("has-open")}),s(document).click(function(e){if(-1==s(e.target).parents().index(s("#primary-navigation"))&&-1==s(e.target).parents().index(s("#mobile-menu-button"))){s(".has-open").length>0&&s(".menu-item-has-children.has-open .sub-menu").fadeOut(100).parent(".has-open").removeClass("has-open");var n=s("#mobile-menu-button");n.hasClass("has-open")&&(s("ul#menu-primary-navigation").fadeOut(100),n.removeClass("has-open"))}}),s("#mobile-menu-button").click(function(e){e.preventDefault(),s("#primary-navigation .menu").fadeToggle(100),s(this).toggleClass("has-open")})}function i(){s("button#select").click(function(s){s.preventDefault(),t("selectable")})}function t(s){var e;document.selection?(e=document.body.createTextRange(),e.moveToElementText(document.getElementById(s)),e.select()):window.getSelection&&(e=document.createRange(),e.selectNode(document.getElementById(s)),window.getSelection().addRange(e))}var p;window.onresize=function(){p&&clearTimeout(p);var s;s=setTimeout(function(){n()},200)},s(window).load(function(){n()}),s(document).ready(function(){r(),i()})}(jQuery);var rfstockalike=angular.module("rfstockalike",["ngSanitize"]);rfstockalike.controller("rfEngineController",["$scope","$http","$q","$window","$filter",function(s,e,n,r,i){var t=document.getElementById("rfstockalike_nonce").value,p=r.post_id;s.errors=[],s.successes=[],s.math=Math,s.thrustCurves={0:"",1:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 1.00 0 0\r\n        key = 0.95 0.50 0 0\r\n        key = 1.00 0.50",2:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 1.00 0 0\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",3:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.20 1.00 6 -0.2\r\n     key = 0.95 1.00 0  0.0\r\n     key = 1.00 0.50",4:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",5:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 0.50 0 0\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",6:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 0.10 0.1 0.1\r\n    key = 0.88 0.10 0.1 0.1\r\n    key = 0.92 1.00\r\n        key = 0.95 1.00\r\n        key = 1.00 0.50"},s.thrustCurveNames={0:"Stock",1:"Increasing",2:"Steady",3:"SteadyDip",4:"Decreasing",5:"DecreasingDip",6:"PulseSteady"},s.launchIsp={start:[234,260,44.7,67,1,1,null,1],1:[248,275,54.2,81.25,1.15,.95,1.21,1],2:[266,295,66.8,100.25,1.32,.88,1.23,1],3:[279,310,76.3,114.5,1.43,.84,1.14,1],4:[288,320,82.7,124,1.5,.81,1.08,.8],5:[295,327,87.1,130.65,1.55,.8,1.05,.7],6:[299,332,90.3,135.4,1.58,.78,1.04,.6],7:[304,337,93.4,140.15,1.61,.77,1.03,.6]},s.launchPlusIsp={start:[220,268,38.3,53.6,1,1,null,1],1:[233,283,46.4,65,1.15,.95,1.21,1],2:[250,304,57.3,80.2,1.32,.88,1.23,.8],3:[262,319,65.4,91.6,1.43,.84,1.14,.75],4:[271,330,70.9,99.2,1.5,.81,1.08,.7],5:[277,337,74.6,104.5,1.55,.8,1.05,.65],6:[281,342,77.4,108.3,1.58,.78,1.04,.6],7:[285,347,80.1,112.1,1.62,.77,1.03,.5]},s.upperIsp={start:[168,280,35.2,44,1,1,null,1],1:[185,308,48.8,61,1.26,.91,1.39,1],2:[195,325,56.8,71,1.39,.86,1.16,1],3:[201,335,61.6,77,1.46,.84,1.08,1],4:[204,340,64,80,1.5,.82,1.04,.8],5:[207,345,66.4,83,1.53,.81,1.04,.75],6:[210,350,68.8,86,1.56,.8,1.04,.7],7:[213,355,71.2,89,1.6,.79,1.03,.6]},s.upperPlusIsp={start:[102,291,25.4,30.47,1,1,null,1],1:[112,320,38.5,46.2,1.38,.91,1.52,1],2:[118,338,46.2,55.47,1.57,.86,1.2,.75],3:[122,348,50.9,61.02,1.68,.84,1.1,.4],4:[124,354,53.2,63.81,1.72,.82,1.05,.3],5:[126,359,55.5,66.59,1.77,.81,1.04,.2],6:[127,364,57.8,69.36,1.82,.8,1.04,.15],7:[129,369,60.1,72.14,1.87,.79,1.04,.1]},s.orbitalIsp={start:[100,286,18.9,21.71,1,1,null,1],1:[110,314,25.8,29.71,1.24,.91,1.37,1],2:[116,332,30.3,34.86,1.38,.86,1.17,.75],3:[120,342,32.8,37.71,1.45,.84,1.08,.4],4:[121,347,34,39.14,1.48,.82,1.04,.2],5:[123,352,35.3,40.57,1.52,.81,1.04,.15],6:[125,357,36.5,42,1.55,.8,1.03,.1],7:[127,362,37.8,43.43,1.58,.79,1.04,.1]},s.solidIsp={start:[200,220,4.347826087,23,1],1:[215,235,5.263157895,19,1],2:[230,250,6.25,16,1],3:[240,260,7.142857143,14,1],4:[245,268,8.333333333,12,1],5:[255,276,10,10,1],6:[260,284,11.11111111,9,1],7:[265,290,12.5,8,1]},s.solidPlusIsp={start:[160,231,4.761904762,21,1],1:[172,247,5.882352941,17,1],2:[184,263,7.142857143,14,1],3:[192,273,8.333333333,12,1],4:[196,281,10,10,1],5:[204,290,12.5,8,1],6:[208,298,14.28571429,7,1],7:[212,305,16.66666667,6,1]},s.nuclearIsp={3:[380,850,1.46,1.679,1,1,null,1],4:[391,875,2,2.3,1.33,.97,1.37,1],5:[407,910,2.4241,2.787715,1.55,.93,1.21,1],6:[416,930,4,4.6,2.5,.91,1.65,1],7:[429,960,6,6.9,3.64,.89,1.5,1],8:[452,1010,8,9.2,4.61,.84,1.33,1]},s.aerospikeIsp={start:[252,280,20.7,28.94175,1,1,null,1],1:[277,308,31.4,43.89,1.38,.91,1.52,1],2:[293,325,37.6,52.6965,1.56,.86,1.2,.8],3:[302,335,41.4,57.969,1.67,.84,1.1,.7],4:[306,340,43.3,60.6195,1.72,.82,1.05,.6],5:[311,345,45.2,63.25575,1.77,.81,1.04,.5],6:[315,350,47.1,65.892,1.82,.8,1.04,.4],7:[320,355,48.9,68.52825,1.86,.79,1.04,.3]},s.rcsIsp={start:[351,366,44.7,67,1,1,null,1],1:[370,390,54.2,81.25,1.15,.95,1.21,1],2:[399,416,66.8,100.25,1.32,.88,1.23,1],3:[418,437,76.3,114.5,1.43,.84,1.14,1],4:[432,451,82.7,124,1.5,.81,1.08,.8],5:[442,461,87.1,130.65,1.55,.8,1.05,.7],6:[448,468,90.3,135.4,1.58,.78,1.04,.6],7:[456,475,93.4,140.15,1.61,.77,1.03,.6]},s.engineTypeConfigs={launch:["L",s.launchIsp,1,!1],"launch-plus":["L+",s.launchPlusIsp,2,!1],upper:["U",s.upperIsp,4,!1],"upper-plus":["U+",s.upperPlusIsp,12,!0],orbital:["O",s.orbitalIsp,24,!0],"nuclear-thermal":["N",s.nuclearIsp,0,!1],solid:["S",s.solidIsp,1,!0],"solid-plus":["S+",s.solidPlusIsp,1,!0],aerospike:["A",s.aerospikeIsp,0,!0],jet:["J",null,0,!0],rcs:["L",s.rcsIsp,0,!0]};var f,o=[{config_mixture:135,config_ratio:0,config_tech_node:""},{config_mixture:134,config_ratio:0,config_tech_node:""},{config_mixture:178,config_ratio:1.6,config_tech_node:""},{config_mixture:138,config_ratio:0,config_tech_node:""},{config_mixture:137,config_ratio:0,config_tech_node:""},{config_mixture:177,config_ratio:2,config_tech_node:""},{config_mixture:180,config_ratio:1.7,config_tech_node:""},{config_mixture:888,config_ratio:0,config_tech_node:""}];if(p){f=e.get("/wp-json/wp/v2/engines/"+p);var a=e.get("/wp-json/wp/v2/mixtures/?filter[posts_per_page]=-1"),_=e.get("/wp-json/wp/v2/resources/?filter[posts_per_page]=-1"),k=e.get("/wp-json/wp/v2/terms/engine-type");n.all([f,a,_,k]).then(function(e){if(s.types=e[3].data,s.resources=e[2].data,s.mixtures=e[1].data,s.engines=e[0].data,s.engines.id)s.engine=s.engines,s.cleanData(s.engine),s.doCalcs(s.engine);else{var n;for(n=0;n<s.engines.length;n++)s.cleanData(s.engines[n]),s.doCalcs(s.engines[n])}})}s.cleanData=function(e){if(window.console.log(e),e.ksprfs.ksprfs_engine_mefx="on"===e.ksprfs.ksprfs_engine_mefx||1==e.ksprfs.ksprfs_engine_mefx?!0:!1,e.ksprfs.ksprfs_engine_bimodal="on"===e.ksprfs.ksprfs_engine_bimodal||1==e.ksprfs.ksprfs_engine_bimodal?!0:!1,e.ksprfs.ksprfs_engine_ffsc="on"===e.ksprfs.ksprfs_engine_ffsc||1==e.ksprfs.ksprfs_engine_ffsc?!0:!1,e.ksprfs.ksprfs_engine_dedicated="on"===e.ksprfs.ksprfs_engine_dedicated||1==e.ksprfs.ksprfs_engine_dedicated?!0:!1,e.ksprfs.ksprfs_engine_vectoring_override="on"===e.ksprfs.ksprfs_engine_vectoring_override||1==e.ksprfs.ksprfs_engine_vectoring_override?!0:!1,e.ksprfs.ksprfs_engine_vectoring_exists="on"===e.ksprfs.ksprfs_engine_vectoring_exists||1==e.ksprfs.ksprfs_engine_vectoring_exists?!0:!1,e.ksprfs.ksprfs_engine_vectoring=parseInt(e.ksprfs.ksprfs_engine_vectoring)?parseInt(e.ksprfs.ksprfs_engine_vectoring):0,e.ksprfs.ksprfs_engine_type){var n=s.getType(e.ksprfs.ksprfs_engine_type[0]);e.ksprfs.ksprfs_type=n.slug}e.ksprfs.ksprfs_engine_flow||(e.ksprfs.ksprfs_engine_flow="STACK_PRIORITY_SEARCH")},s.prepareSaveData=function(e){e.ksprfs.ksprfs_engine_mefx=e.ksprfs.ksprfs_engine_mefx===!0?"on":null,e.ksprfs.ksprfs_engine_bimodal=e.ksprfs.ksprfs_engine_bimodal===!0?"on":null,e.ksprfs.ksprfs_engine_ffsc=e.ksprfs.ksprfs_engine_ffsc===!0?"on":null,e.ksprfs.ksprfs_engine_dedicated=e.ksprfs.ksprfs_engine_dedicated===!0?"on":null,e.ksprfs.ksprfs_engine_vectoring_override=e.ksprfs.ksprfs_engine_vectoring_override===!0?"on":null,e.ksprfs.ksprfs_engine_vectoring_exists=e.ksprfs.ksprfs_engine_vectoring_exists===!0?"on":null,e.ksprfs.ksprfs_engine_type||(e.ksprfs.ksprfs_engine_type=[]),e.ksprfs.ksprfs_engine_type[0]=s.getTypeBySlug(e.ksprfs.ksprfs_type).ID.toString()},s.doCalcs=function(e){s.errors=[],s.successes=[],s.doIsp(e),s.doTWR(e),s.doHeat(e),s.doConfigs(e),s.doCost(e)},s.doTWR=function(e){e.ksprfs.engine_twr=e.ksprfs.ksprfs_engine_thrust/9.81/e.ksprfs.ksprfs_engine_mass;var n,r,i,t,p;if(i=e.ksprfs.ksprfs_engine_ispslm<1?.9:4,t=e.ksprfs.ksprfs_engine_ispvm<1?1.5:8,p=e.ksprfs.ksprfs_engine_ffsc?1.33:1,n=Math.min(Math.max(Math.pow(e.ksprfs.ksprfs_engine_ispslm,i),.5),10),r=Math.min(Math.max(Math.pow(e.ksprfs.ksprfs_engine_ispvm,t),.5),10),e.ksprfs.engine_gtwr=s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][2]/n/r*p,e.ksprfs.engine_twr>.95*e.ksprfs.engine_gtwr&&e.ksprfs.engine_twr<1.05*e.ksprfs.engine_gtwr?e.ksprfs.engine_twr_within_goal=!0:e.ksprfs.engine_twr_within_goal=!1,"solid"===e.ksprfs.ksprfs_type||"solid-plus"===e.ksprfs.ksprfs_type){e.ksprfs.ksprfs_engine_mft_volume&&0!==e.ksprfs.ksprfs_engine_mft_volume&&"0"!==e.ksprfs.ksprfs_engine_mft_volume||s.errors.push("No tank volume specified."),e.ksprfs.engine_goal_percent_case=1/e.ksprfs.engine_gtwr*100;var f=parseFloat(e.ksprfs.ksprfs_engine_extra_mass)||0,o=e.ksprfs.ksprfs_engine_mass+f,a=.00178*e.ksprfs.ksprfs_engine_mft_volume+o;e.ksprfs.engine_percent_case=o/a*100,e.ksprfs.engine_percent_case>.95*e.ksprfs.engine_goal_percent_case&&e.ksprfs.engine_percent_case<1.05*e.ksprfs.engine_goal_percent_case?e.ksprfs.engine_percent_case_within_goal=!0:e.ksprfs.engine_percent_case_within_goal=!1}switch(e.ksprfs.ksprfs_engine_throttle_type){case"full-throttle":e.finalThrottle=0;break;case"unthrottleable":e.finalThrottle=-1;break;case"use-default":e.finalThrottle=s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][7];break;case"use-default-tech":var _=s.engine.ksprfs.ksprfs_engine_throttle_tl;"start"===_&&(_="0"),e.finalThrottle=_,parseInt(e.finalThrottle)||(e.finalThrottle=0);break;case"custom-throttle":e.finalThrottle=Math.round(e.ksprfs.ksprfs_engine_throttle*s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][7]*1e3)/1e3,parseFloat(e.finalThrottle)||(e.finalThrottle=0);break;default:e.finalThrottle=0}"rcs"===e.ksprfs.ksprfs_type&&(e.finalThrottle=0)},s.doIsp=function(e){var n,r;n=s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][1]*e.ksprfs.ksprfs_engine_ispvm,r=s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][0]*e.ksprfs.ksprfs_engine_ispslm,e.ksprfs.ksprfs_engine_ffsc&&(n*=1.07,r*=1.07),e.ksprfs.resultIspV=n,e.ksprfs.resultIspSL=r},s.doHeat=function(e){var n,r;if("solid"===e.ksprfs.ksprfs_type||"solid-plus"===e.ksprfs.ksprfs_type?(n=Math.pow(e.ksprfs.ksprfs_engine_mft_volume*e.ksprfs.resultIspV/4/9.81/e.ksprfs.ksprfs_engine_thrust+20,.75),e.ksprfs.engine_heat=Math.round(.5*(200+5200/n))):(n=135*Math.pow(e.ksprfs.resultIspSL/200,.7)*Math.pow(e.ksprfs.engine_twr/e.ksprfs.engine_gtwr,.5),"nuclear-thermal"===e.ksprfs.ksprfs_type&&(n*=1.25),e.ksprfs.engine_heat=n),"solid"!==e.ksprfs.ksprfs_type&&"solid-plus"!==e.ksprfs.ksprfs_type){var i;r=s.engineTypeConfigs[e.ksprfs.ksprfs_type][1][e.ksprfs.ksprfs_engine_tech_level][6],i=Math.pow(500+8*n/r,1.03),e.ksprfs.max_heat=Math.max(1450,Math.min(2400,i))}else e.ksprfs.max_heat=1800;e.ksprfs.max_heat=Math.round(e.ksprfs.max_heat,0)},s.doConfigs=function(e){var n;for(n=0;n<e.ksprfs.ksprfs_engine_configs.length;n++){e.ksprfs.ksprfs_engine_configs[n].config_mixture=parseInt(e.ksprfs.ksprfs_engine_configs[n].config_mixture);var r,i=s.getMixture(e.ksprfs.ksprfs_engine_configs[n].config_mixture),t=s.getFuel(i).ksprfs.ksprfs_resource_density;s.getOxidizer(i)&&(r=s.getOxidizer(i).ksprfs.ksprfs_resource_density);var p=e.ksprfs.ksprfs_engine_configs[n].config_ratio;s.getOxidizer(i)?(e.ksprfs.ksprfs_engine_configs[n].fuelRatio=1/t/(1/t+p/r)*100,e.ksprfs.ksprfs_engine_configs[n].oxyRatio=100-e.ksprfs.ksprfs_engine_configs[n].fuelRatio):e.ksprfs.ksprfs_engine_configs[n].fuelRatio=100;var f,o;f=o=1,f=i.ksprfs.ksprfs_mixture_ispv_mult,o=i.ksprfs.ksprfs_mixture_ispsl_mult,e.ksprfs.ksprfs_engine_ffsc&&(f*=1.07,o*=1.07),e.ksprfs.ksprfs_engine_configs[n].ispV_mult=f*e.ksprfs.ksprfs_engine_ispvm,e.ksprfs.ksprfs_engine_configs[n].ispSL_mult=o*e.ksprfs.ksprfs_engine_ispslm;var a,_,k;a=e.ksprfs.ksprfs_engine_ignitions,_=e.ksprfs.ksprfs_engine_ignition_mode,a||(a=0),k=_>1?a:i.ksprfs.ksprfs_mixture_hypergolic?a:1,e.ksprfs.ksprfs_engine_configs[n].ignitions=k,"solid"===e.ksprfs.ksprfs_type||"solid-plus"===e.ksprfs.ksprfs_type?(e.ksprfs.ksprfs_engine_configs[n].ullage=!1,e.ksprfs.ksprfs_engine_configs[n].ignitions=1):e.ksprfs.ksprfs_engine_configs[n].ullage=!0,e.ksprfs.ksprfs_engine_configs[n].title=i.title,e.ksprfs.ksprfs_engine_configs[n].config_thrust_curve&&"0"!=e.ksprfs.ksprfs_engine_configs[n].config_thrust_curve&&("-1"===e.ksprfs.ksprfs_engine_configs[n].config_thrust_curve?e.ksprfs.ksprfs_engine_configs[n].title+="Custom"+(n+1):e.ksprfs.ksprfs_engine_configs[n].title+=s.thrustCurveNames[e.ksprfs.ksprfs_engine_configs[n].config_thrust_curve])}},s.doCost=function(s){var e,n,r=1.5;e=.8*s.ksprfs.resultIspV+.2*s.ksprfs.resultIspSL-200,e=Math.pow(e,2)*s.ksprfs.ksprfs_engine_thrust/1e3*(1+.2*Math.abs(s.ksprfs.ksprfs_engine_vectoring)),"jet"===s.ksprfs.ksprfs_type&&(e*=.05),"nuclear-thermal"===s.ksprfs.ksprfs_type&&(e*=4),s.ksprfs.ksprfs_engine_ffsc&&(e*=.5),n=e>0?e*(Math.pow(e/s.ksprfs.ksprfs_engine_mass/4e3),.25)*.5+50+70*s.ksprfs.ksprfs_engine_mass:0,s.ksprfs.engineCost=Math.round(n*r);var i=s.ksprfs.ksprfs_engine_ffsc?10:5;s.ksprfs.engineEntryCost=s.ksprfs.engineCost*i},s.defaultIgnitions=function(e){e.ksprfs.ksprfs_engine_ignitions=s.engineTypeConfigs[e.ksprfs.ksprfs_type][2],s.engineTypeConfigs[e.ksprfs.ksprfs_type][3]?e.ksprfs.ksprfs_engine_ignition_mode=2:e.ksprfs.ksprfs_engine_ignition_mode=1,s.doCalcs(e)},s.rcsDefault=function(e){e.ksprfs.ksprfs_engine_configs=o,e.ksprfs.ksprfs_engine_tech_level=1,e.ksprfs.ksprfs_engine_ispvm=1,e.ksprfs.ksprfs_engine_ispslm=1,e.ksprfs.ksprfs_engine_ignition_mode=0,e.ksprfs.ksprfs_engine_flow="STAGE_PRIORITY_FLOW",s.rcsMass(e)},s.rcsMass=function(e){e.ksprfs.ksprfs_rcs_nozzles||(e.ksprfs.ksprfs_rcs_nozzles=4),e.ksprfs.ksprfs_engine_mass=(e.ksprfs.ksprfs_rcs_nozzles*e.ksprfs.ksprfs_engine_thrust*6+5)/1e3,s.doCalcs(e)},s.displayTechLevel=function(s){var e=s.ksprfs.ksprfs_engine_tech_level;return"start"===e&&(e="0"),e},s.addConfig=function(s){s.ksprfs.ksprfs_engine_configs.push({config_mixture:0,config_ratio:0,config_tech_node:""})},s.removeConfig=function(s,e){s.ksprfs.ksprfs_engine_configs.splice(e,1)},s.getFuel=function(e){return s.getResource(e.ksprfs.ksprfs_mixture_fuel)},s.getOxidizer=function(e){return s.getResource(e.ksprfs.ksprfs_mixture_oxidizer)},s.getResource=function(e){return e=parseInt(e),i("filter")(s.resources,function(s){return s.id===e})[0]},s.getMixture=function(e){return e=parseInt(e),i("filter")(s.mixtures,function(s){return s.id===e})[0]},s.getType=function(e){return e=parseInt(e),i("filter")(s.types,function(s){return s.id===e})[0]},s.getTypeBySlug=function(e){return i("filter")(s.types,function(s){return s.slug===e})[0]},s.changeTitle=function(s){var e=window.prompt("Change Title","");null!==e&&""!==e&&(s.title=e)},s.saveEngine=function(n){s.prepareSaveData(n);var r=[];s.successes=[],s.errors=[],angular.forEach(n.ksprfs,function(s,e){r.push({key:e,value:s})});var i="/wp-json/wp/v2/posts/";"undefined"!=typeof n.ID&&(i+=n.ID);var p={method:"PUT",url:i,transformResponse:function(s,e){return s},params:{_wp_json_nonce:t},data:{ID:n.ID,title:n.title,ksprfs:r}};e(p).success(function(){s.successes.push("Engine saved!")}).error(function(){s.errors.push("Unable to save engine. Be sure you are logged in properly, and try again.")}),s.cleanData(n)},s.submitEngine=function(n){n.engineMod=window.prompt("Mod for this engine:",""),s.prepareSaveData(n);var r={method:"POST",url:"/engine-submit/",data:n};e(r).success(function(){s.successes.push("Engine submitted!")}).error(function(){s.errors.push("Unable to submit engine. Please try again.")}),s.cleanData(n)},s.createEngine=function(n){var r=[];s.successes=[],s.errors=[],angular.forEach(n.ksprfs,function(s,e){r.push({key:e,value:s})});var i={method:"POST",url:"/wp-json/wp/v2/engines",params:{_wp_json_nonce:t},data:{title:n.title,type:"engine",status:"publish",ksprfs:r}};e(i).success(function(){s.successes.push("Engine submitted!")}).error(function(){s.errors.push("Unable to submit engine. Please try again.")})},s.parseField=function(){s.parsed=angular.fromJson(s.engine),window.console.log(s.parsed)}}]),rfstockalike.controller("rfEngineListController",["$scope","$http","$q","$filter","$timeout","$window",function(s,e,n,r,i,t){s.engines=[],s.currentPage=0,s.pageSize=30,s.data=[],s.loading=!0;var p=[],f=e.get("/wp-json/wp/v2/mixtures/?filter[posts_per_page]=-1&filter[order]=ASC&filter[orderby]=title");p.push(f);var o=Math.ceil(t.engineCount/s.pageSize),a=1,_="/wp-json/wp/v2/engines/?filter[posts_per_page]="+s.pageSize+"&page=";for(a;o>=a;a++){var k=e.get(_+a);p.push(k)}n.all(p).then(function(e){s.mixtures=e[0].data;var n;for(n=1;n<e.length;n++)s.data.push.apply(s.data,e[n].data);angular.forEach(s.data,function(e,n){var r={};r.ID=e.id,r.link=e.link,r.title=e.title.rendered,r.type=e.ksprfs.ksprfs_type;var i=[];angular.forEach(e.ksprfs.ksprfs_engine_configs,function(s,e){i.push(s.config_mixture)}),r.configs=i,s.engines.push(r)}),window.console.log(s.engines),s.loading=!1}),s.getMixture=function(e){return r("filter")(s.mixtures,function(s){return s.ID===e})},s.ceil=function(s){return Math.ceil(s)},s.checkPage=function(){i(function(){s.filteredEngines.length/s.pageSize<s.currentPage&&(s.currentPage=0)},200)}}]),rfstockalike.filter("startFrom",function(){return function(s,e){return e=+e,s.length<e?s.slice(0):s.slice(e)}});