!function(e){function s(){e(window).width()>600&&(e("#primary-navigation .menu").removeAttr("style"),e("#mobile-menu-button").removeClass("has-open"))}function n(){s()}function r(){e(document).click(function(s){if(-1==e(s.target).parents().index(e("#primary-navigation"))&&-1==e(s.target).parents().index(e("#mobile-menu-button"))){e(".has-open").length>0&&e(".menu-item-has-children.has-open .sub-menu").fadeOut(100).parent(".has-open").removeClass("has-open");var n=e("#mobile-menu-button");n.hasClass("has-open")&&(e("ul#menu-primary-navigation").fadeOut(100),n.removeClass("has-open"))}}),e(".menu-item-has-children > a").click(function(s){s.preventDefault(),e(this).siblings(".sub-menu").fadeToggle(100),e(this).parent().siblings(".menu-item-has-children.has-open").each(function(){e(this).removeClass("has-open").find(".sub-menu").fadeOut(100),e(this).find(".menu-item-has-children.has-open").removeClass("has-open")}),e(this).parent().toggleClass("has-open")}),e(document).click(function(s){if(-1==e(s.target).parents().index(e("#primary-navigation"))&&-1==e(s.target).parents().index(e("#mobile-menu-button"))){e(".has-open").length>0&&e(".menu-item-has-children.has-open .sub-menu").fadeOut(100).parent(".has-open").removeClass("has-open");var n=e("#mobile-menu-button");n.hasClass("has-open")&&(e("ul#menu-primary-navigation").fadeOut(100),n.removeClass("has-open"))}}),e("#mobile-menu-button").click(function(s){s.preventDefault(),e("#primary-navigation .menu").fadeToggle(100),e(this).toggleClass("has-open")})}function t(){e("body").on("click","button#select",function(s){s.preventDefault(),e("#selectable").click(),i("selectable")})}function i(e){var s;document.selection?(s=document.body.createTextRange(),s.moveToElementText(document.getElementById(e)),s.select()):window.getSelection&&(window.getSelection().removeAllRanges(),s=document.createRange(),s.selectNode(document.getElementById(e)),window.getSelection().addRange(s))}var p;window.onresize=function(){p&&clearTimeout(p);var e;e=setTimeout(function(){n()},200)},e(window).load(function(){n()}),e(document).ready(function(){r(),t()})}(jQuery),angular.module("rfsApp",["ui.router","rfstockalikeBase","rfstockalikeEngines"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,s,n){s.otherwise("/home"),e.state("tabs",{url:"/","abstract":!0,templateUrl:RFS.partials+"tabs.html",controller:"RFBaseController"}).state("tabs.home",{url:"home",views:{"main-tab":{templateUrl:RFS.partials+"home.html"}}}).state("tabs.engines",{url:"engines",views:{"main-tab":{templateUrl:RFS.partials+"engine-list.html",controller:"RFEngineListController"}}}).state("tabs.singleEngine",{url:"engines/:id",views:{"main-tab":{templateUrl:RFS.partials+"engine-single.html",controller:"RFEngineController"}}}).state("tabs.mods",{url:"mods",views:{"main-tab":{templateUrl:RFS.partials+"mods.html"}}}).state("tabs.singleMod",{url:"mods/:slug",views:{"main-tab":{templateUrl:RFS.partials+"mods-single.html",controller:"RFSingleModController"}}}),n.interceptors.push([function(){return{request:function(e){return e.headers=e.headers||{},e.headers["X-WP-Nonce"]=RFS.nonce,e}}}])}]).directive("rfConfig",function(){return{templateUrl:RFS.partials+"engine-config.html"}}),angular.module("rfstockalikeBase",[]).controller("RFBaseController",["$scope","$http","$filter",function(e,s,n){e.errors=[],e.successes=[],e.math=Math,e.enginesList=[],e.engines=[],e.mods=[],e.types=[],e.resources=[],e.mixtures=[],window.console.log(RFS.nonce),e.thrustCurves={0:"",1:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 1.00 0 0\r\n        key = 0.95 0.50 0 0\r\n        key = 1.00 0.50",2:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 1.00 0 0\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",3:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.20 1.00 6 -0.2\r\n     key = 0.95 1.00 0  0.0\r\n     key = 1.00 0.50",4:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",5:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 0.50 0 0\r\n        key = 0.95 1.00 0 0\r\n        key = 1.00 0.50",6:"key = 0.00 0.01\r\n        key = 0.01 0.01\r\n        key = 0.05 0.10 0.1 0.1\r\n    key = 0.88 0.10 0.1 0.1\r\n    key = 0.92 1.00\r\n        key = 0.95 1.00\r\n        key = 1.00 0.50"},e.thrustCurveNames={0:"Stock",1:"Increasing",2:"Steady",3:"SteadyDip",4:"Decreasing",5:"DecreasingDip",6:"PulseSteady"},e.launchIsp={start:[234,260,44.7,67,1,1,null,1],1:[248,275,54.2,81.25,1.15,.95,1.21,1],2:[266,295,66.8,100.25,1.32,.88,1.23,1],3:[279,310,76.3,114.5,1.43,.84,1.14,1],4:[288,320,82.7,124,1.5,.81,1.08,.8],5:[295,327,87.1,130.65,1.55,.8,1.05,.7],6:[299,332,90.3,135.4,1.58,.78,1.04,.6],7:[304,337,93.4,140.15,1.61,.77,1.03,.6]},e.launchPlusIsp={start:[220,268,38.3,53.6,1,1,null,1],1:[233,283,46.4,65,1.15,.95,1.21,1],2:[250,304,57.3,80.2,1.32,.88,1.23,.8],3:[262,319,65.4,91.6,1.43,.84,1.14,.75],4:[271,330,70.9,99.2,1.5,.81,1.08,.7],5:[277,337,74.6,104.5,1.55,.8,1.05,.65],6:[281,342,77.4,108.3,1.58,.78,1.04,.6],7:[285,347,80.1,112.1,1.62,.77,1.03,.5]},e.upperIsp={start:[168,280,35.2,44,1,1,null,1],1:[185,308,48.8,61,1.26,.91,1.39,1],2:[195,325,56.8,71,1.39,.86,1.16,1],3:[201,335,61.6,77,1.46,.84,1.08,1],4:[204,340,64,80,1.5,.82,1.04,.8],5:[207,345,66.4,83,1.53,.81,1.04,.75],6:[210,350,68.8,86,1.56,.8,1.04,.7],7:[213,355,71.2,89,1.6,.79,1.03,.6]},e.upperPlusIsp={start:[102,291,25.4,30.47,1,1,null,1],1:[112,320,38.5,46.2,1.38,.91,1.52,1],2:[118,338,46.2,55.47,1.57,.86,1.2,.75],3:[122,348,50.9,61.02,1.68,.84,1.1,.4],4:[124,354,53.2,63.81,1.72,.82,1.05,.3],5:[126,359,55.5,66.59,1.77,.81,1.04,.2],6:[127,364,57.8,69.36,1.82,.8,1.04,.15],7:[129,369,60.1,72.14,1.87,.79,1.04,.1]},e.orbitalIsp={start:[100,286,18.9,21.71,1,1,null,1],1:[110,314,25.8,29.71,1.24,.91,1.37,1],2:[116,332,30.3,34.86,1.38,.86,1.17,.75],3:[120,342,32.8,37.71,1.45,.84,1.08,.4],4:[121,347,34,39.14,1.48,.82,1.04,.2],5:[123,352,35.3,40.57,1.52,.81,1.04,.15],6:[125,357,36.5,42,1.55,.8,1.03,.1],7:[127,362,37.8,43.43,1.58,.79,1.04,.1]},e.solidIsp={start:[200,220,4.347826087,23,1],1:[215,235,5.263157895,19,1],2:[230,250,6.25,16,1],3:[240,260,7.142857143,14,1],4:[245,268,8.333333333,12,1],5:[255,276,10,10,1],6:[260,284,11.11111111,9,1],7:[265,290,12.5,8,1]},e.solidPlusIsp={start:[160,231,4.761904762,21,1],1:[172,247,5.882352941,17,1],2:[184,263,7.142857143,14,1],3:[192,273,8.333333333,12,1],4:[196,281,10,10,1],5:[204,290,12.5,8,1],6:[208,298,14.28571429,7,1],7:[212,305,16.66666667,6,1]},e.nuclearIsp={3:[380,850,1.46,1.679,1,1,null,1],4:[391,875,2,2.3,1.33,.97,1.37,1],5:[407,910,2.4241,2.787715,1.55,.93,1.21,1],6:[416,930,4,4.6,2.5,.91,1.65,1],7:[429,960,6,6.9,3.64,.89,1.5,1],8:[452,1010,8,9.2,4.61,.84,1.33,1]},e.aerospikeIsp={start:[252,280,20.7,28.94175,1,1,null,1],1:[277,308,31.4,43.89,1.38,.91,1.52,1],2:[293,325,37.6,52.6965,1.56,.86,1.2,.8],3:[302,335,41.4,57.969,1.67,.84,1.1,.7],4:[306,340,43.3,60.6195,1.72,.82,1.05,.6],5:[311,345,45.2,63.25575,1.77,.81,1.04,.5],6:[315,350,47.1,65.892,1.82,.8,1.04,.4],7:[320,355,48.9,68.52825,1.86,.79,1.04,.3]},e.rcsIsp={start:[351,366,44.7,67,1,1,null,1],1:[370,390,54.2,81.25,1.15,.95,1.21,1],2:[399,416,66.8,100.25,1.32,.88,1.23,1],3:[418,437,76.3,114.5,1.43,.84,1.14,1],4:[432,451,82.7,124,1.5,.81,1.08,.8],5:[442,461,87.1,130.65,1.55,.8,1.05,.7],6:[448,468,90.3,135.4,1.58,.78,1.04,.6],7:[456,475,93.4,140.15,1.61,.77,1.03,.6]},e.engineTypeConfigs={launch:["L",e.launchIsp,1,!1],"launch-plus":["L+",e.launchPlusIsp,2,!1],upper:["U",e.upperIsp,4,!1],"upper-plus":["U+",e.upperPlusIsp,12,!0],orbital:["O",e.orbitalIsp,24,!0],"nuclear-thermal":["N",e.nuclearIsp,0,!1],solid:["S",e.solidIsp,1,!0],"solid-plus":["S+",e.solidPlusIsp,1,!0],aerospike:["A",e.aerospikeIsp,0,!0],jet:["J",null,0,!0],rcs:["L",e.rcsIsp,0,!0]},e.rcsDefaultConfigs=[{config_mixture:135,config_ratio:0,config_tech_node:""},{config_mixture:134,config_ratio:0,config_tech_node:""},{config_mixture:178,config_ratio:1.6,config_tech_node:""},{config_mixture:138,config_ratio:0,config_tech_node:""},{config_mixture:137,config_ratio:0,config_tech_node:""},{config_mixture:177,config_ratio:2,config_tech_node:""},{config_mixture:180,config_ratio:1.7,config_tech_node:""},{config_mixture:888,config_ratio:0,config_tech_node:""}],s.get("/wp-json/wp/v2/terms/engine-mod/?per_page=0").success(function(s){e.setMods(s)}),e.setEngines=function(s){e.engines=s},e.setEnginesList=function(s){e.enginesList=s},e.setEngine=function(s){e.engine=s},e.setMixtures=function(s){e.mixtures=s},e.setMods=function(s){e.mods=s},e.setTypes=function(s){e.types=s},e.setResources=function(s){e.resources=s},e.getEngine=function(){return e.engine},e.prepareEngineList=function(e){var s={};s.title=e.title.rendered,s.link=e.link,s.id=e.id,s.type=e.ksprfs.ksprfs_type;var n=[];return angular.forEach(e.ksprfs.ksprfs_engine_configs,function(e,s){n.push(e.config_mixture)}),s.configs=n,s},e.getSingleEngine=function(s){var r=n("filter")(e.engines,function(e){return parseInt(e.id)===parseInt(s)});return r[0]},e.cleanData=function(s){if(s.ksprfs.ksprfs_engine_mefx="on"===s.ksprfs.ksprfs_engine_mefx||1==s.ksprfs.ksprfs_engine_mefx?!0:!1,s.ksprfs.ksprfs_engine_bimodal="on"===s.ksprfs.ksprfs_engine_bimodal||1==s.ksprfs.ksprfs_engine_bimodal?!0:!1,s.ksprfs.ksprfs_engine_ffsc="on"===s.ksprfs.ksprfs_engine_ffsc||1==s.ksprfs.ksprfs_engine_ffsc?!0:!1,s.ksprfs.ksprfs_engine_dedicated="on"===s.ksprfs.ksprfs_engine_dedicated||1==s.ksprfs.ksprfs_engine_dedicated?!0:!1,s.ksprfs.ksprfs_engine_vectoring_override="on"===s.ksprfs.ksprfs_engine_vectoring_override||1==s.ksprfs.ksprfs_engine_vectoring_override?!0:!1,s.ksprfs.ksprfs_engine_vectoring_exists="on"===s.ksprfs.ksprfs_engine_vectoring_exists||1==s.ksprfs.ksprfs_engine_vectoring_exists?!0:!1,s.ksprfs.ksprfs_engine_vectoring=parseInt(s.ksprfs.ksprfs_engine_vectoring)?parseInt(s.ksprfs.ksprfs_engine_vectoring):0,s.ksprfs.ksprfs_engine_type&&!s.ksprfs.ksprfs_type){var n=e.getType(s.ksprfs.ksprfs_engine_type[0]);s.ksprfs.ksprfs_type=n.slug}s.ksprfs.ksprfs_engine_flow||(s.ksprfs.ksprfs_engine_flow="STACK_PRIORITY_SEARCH"),s.ksprfs.ksprfs_engine_ignition_mode=s.ksprfs.ksprfs_engine_ignition_mode.toString(),s.ksprfs.ksprfs_engine_tech_level=s.ksprfs.ksprfs_engine_tech_level.toString()},e.prepareSaveData=function(s){s.ksprfs.ksprfs_engine_mefx=s.ksprfs.ksprfs_engine_mefx===!0?"on":null,s.ksprfs.ksprfs_engine_bimodal=s.ksprfs.ksprfs_engine_bimodal===!0?"on":null,s.ksprfs.ksprfs_engine_ffsc=s.ksprfs.ksprfs_engine_ffsc===!0?"on":null,s.ksprfs.ksprfs_engine_dedicated=s.ksprfs.ksprfs_engine_dedicated===!0?"on":null,s.ksprfs.ksprfs_engine_vectoring_override=s.ksprfs.ksprfs_engine_vectoring_override===!0?"on":null,s.ksprfs.ksprfs_engine_vectoring_exists=s.ksprfs.ksprfs_engine_vectoring_exists===!0?"on":null,s.ksprfs.ksprfs_engine_type||(s.ksprfs.ksprfs_engine_type=[]),s.ksprfs.ksprfs_engine_type[0]=e.getTypeBySlug(s.ksprfs.ksprfs_type).id.toString()},e.getFuel=function(s){return e.getResource(s.ksprfs.ksprfs_mixture_fuel)},e.getOxidizer=function(s){return e.getResource(s.ksprfs.ksprfs_mixture_oxidizer)},e.getResource=function(s){return s=parseInt(s),n("filter")(e.resources,function(e){return e.id===s})[0]},e.getMixture=function(s){return s=parseInt(s),n("filter")(e.mixtures,function(e){return e.id===s})[0]},e.getType=function(s){return s=parseInt(s),n("filter")(e.types,function(e){return e.id===s})[0]},e.getTypeBySlug=function(s){return n("filter")(e.types,function(e){return e.slug===s})[0]}}]),angular.module("rfstockalikeEngines",["ngSanitize"]).controller("RFEngineController",["$scope","$http","$q","$filter","$stateParams",function(e,s,n,r,t){e.doCalcs=function(s){e.errors=[],e.successes=[],e.doIsp(s),e.doTWR(s),e.doHeat(s),e.doConfigs(s),e.doCost(s)},e.doTWR=function(s){s.ksprfs.engine_twr=s.ksprfs.ksprfs_engine_thrust/9.81/s.ksprfs.ksprfs_engine_mass;var n,r,t,i,p;if(t=s.ksprfs.ksprfs_engine_ispslm<1?.9:4,i=s.ksprfs.ksprfs_engine_ispvm<1?1.5:8,p=s.ksprfs.ksprfs_engine_ffsc?1.33:1,n=Math.min(Math.max(Math.pow(s.ksprfs.ksprfs_engine_ispslm,t),.5),10),r=Math.min(Math.max(Math.pow(s.ksprfs.ksprfs_engine_ispvm,i),.5),10),s.ksprfs.engine_gtwr=e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][2]/n/r*p,s.ksprfs.engine_twr>.95*s.ksprfs.engine_gtwr&&s.ksprfs.engine_twr<1.05*s.ksprfs.engine_gtwr?s.ksprfs.engine_twr_within_goal=!0:s.ksprfs.engine_twr_within_goal=!1,"solid"===s.ksprfs.ksprfs_type||"solid-plus"===s.ksprfs.ksprfs_type){s.ksprfs.ksprfs_engine_mft_volume&&0!==s.ksprfs.ksprfs_engine_mft_volume&&"0"!==s.ksprfs.ksprfs_engine_mft_volume||e.errors.push("No tank volume specified."),s.ksprfs.engine_goal_percent_case=1/s.ksprfs.engine_gtwr*100;var f=parseFloat(s.ksprfs.ksprfs_engine_extra_mass)||0,o=s.ksprfs.ksprfs_engine_mass+f,a=.00178*s.ksprfs.ksprfs_engine_mft_volume+o;s.ksprfs.engine_percent_case=o/a*100,s.ksprfs.engine_percent_case>.95*s.ksprfs.engine_goal_percent_case&&s.ksprfs.engine_percent_case<1.05*s.ksprfs.engine_goal_percent_case?s.ksprfs.engine_percent_case_within_goal=!0:s.ksprfs.engine_percent_case_within_goal=!1}switch(s.ksprfs.ksprfs_engine_throttle_type){case"full-throttle":s.finalThrottle=0;break;case"unthrottleable":s.finalThrottle=-1;break;case"use-default":s.finalThrottle=e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][7];break;case"use-default-tech":var g=e.engine.ksprfs.ksprfs_engine_throttle_tl;"start"===g&&(g="0"),s.finalThrottle=g,parseInt(s.finalThrottle)||(s.finalThrottle=0);break;case"custom-throttle":s.finalThrottle=Math.round(s.ksprfs.ksprfs_engine_throttle*e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][7]*1e3)/1e3,parseFloat(s.finalThrottle)||(s.finalThrottle=0);break;default:s.finalThrottle=0}"rcs"===s.ksprfs.ksprfs_type&&(s.finalThrottle=0)},e.doIsp=function(s){var n,r;n=e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][1]*s.ksprfs.ksprfs_engine_ispvm,r=e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][0]*s.ksprfs.ksprfs_engine_ispslm,s.ksprfs.ksprfs_engine_ffsc&&(n*=1.07,r*=1.07),s.ksprfs.resultIspV=n,s.ksprfs.resultIspSL=r},e.doHeat=function(s){var n,r;if("solid"===s.ksprfs.ksprfs_type||"solid-plus"===s.ksprfs.ksprfs_type?(n=Math.pow(s.ksprfs.ksprfs_engine_mft_volume*s.ksprfs.resultIspV/4/9.81/s.ksprfs.ksprfs_engine_thrust+20,.75),s.ksprfs.engine_heat=Math.round(.5*(200+5200/n))):(n=135*Math.pow(s.ksprfs.resultIspSL/200,.7)*Math.pow(s.ksprfs.engine_twr/s.ksprfs.engine_gtwr,.5),"nuclear-thermal"===s.ksprfs.ksprfs_type&&(n*=1.25),s.ksprfs.engine_heat=n),"solid"!==s.ksprfs.ksprfs_type&&"solid-plus"!==s.ksprfs.ksprfs_type){var t;r=e.engineTypeConfigs[s.ksprfs.ksprfs_type][1][s.ksprfs.ksprfs_engine_tech_level][6],t=Math.pow(500+8*n/r,1.03),s.ksprfs.max_heat=Math.max(1450,Math.min(2400,t))}else s.ksprfs.max_heat=1800;s.ksprfs.max_heat=Math.round(s.ksprfs.max_heat,0)},e.doConfigs=function(s){var n;for(n=0;n<s.ksprfs.ksprfs_engine_configs.length;n++){s.ksprfs.ksprfs_engine_configs[n].config_mixture=parseInt(s.ksprfs.ksprfs_engine_configs[n].config_mixture);var r,t=e.getMixture(s.ksprfs.ksprfs_engine_configs[n].config_mixture),i=e.getFuel(t).ksprfs.ksprfs_resource_density;e.getOxidizer(t)&&(r=e.getOxidizer(t).ksprfs.ksprfs_resource_density);var p=s.ksprfs.ksprfs_engine_configs[n].config_ratio;e.getOxidizer(t)?(s.ksprfs.ksprfs_engine_configs[n].fuelRatio=1/i/(1/i+p/r)*100,s.ksprfs.ksprfs_engine_configs[n].oxyRatio=100-s.ksprfs.ksprfs_engine_configs[n].fuelRatio):s.ksprfs.ksprfs_engine_configs[n].fuelRatio=100;var f,o;f=o=1,f=t.ksprfs.ksprfs_mixture_ispv_mult,o=t.ksprfs.ksprfs_mixture_ispsl_mult,s.ksprfs.ksprfs_engine_ffsc&&(f*=1.07,o*=1.07),s.ksprfs.ksprfs_engine_configs[n].ispV_mult=f*s.ksprfs.ksprfs_engine_ispvm,s.ksprfs.ksprfs_engine_configs[n].ispSL_mult=o*s.ksprfs.ksprfs_engine_ispslm;var a,g,l;a=s.ksprfs.ksprfs_engine_ignitions,g=parseInt(s.ksprfs.ksprfs_engine_ignition_mode),a||(a=0),l=g>1?a:t.ksprfs.ksprfs_mixture_hypergolic?a:1,s.ksprfs.ksprfs_engine_configs[n].ignitions=l,"solid"===s.ksprfs.ksprfs_type||"solid-plus"===s.ksprfs.ksprfs_type?(s.ksprfs.ksprfs_engine_configs[n].ullage=!1,s.ksprfs.ksprfs_engine_configs[n].ignitions=1):s.ksprfs.ksprfs_engine_configs[n].ullage=!0,s.ksprfs.ksprfs_engine_configs[n].title=t.title,s.ksprfs.ksprfs_engine_configs[n].config_thrust_curve&&"0"!=s.ksprfs.ksprfs_engine_configs[n].config_thrust_curve&&("-1"===s.ksprfs.ksprfs_engine_configs[n].config_thrust_curve?s.ksprfs.ksprfs_engine_configs[n].title+="Custom"+(n+1):s.ksprfs.ksprfs_engine_configs[n].title+=e.thrustCurveNames[s.ksprfs.ksprfs_engine_configs[n].config_thrust_curve])}},e.doCost=function(e){var s,n,r=1.5;s=.8*e.ksprfs.resultIspV+.2*e.ksprfs.resultIspSL-200,s=Math.pow(s,2)*e.ksprfs.ksprfs_engine_thrust/1e3*(1+.2*Math.abs(e.ksprfs.ksprfs_engine_vectoring)),"jet"===e.ksprfs.ksprfs_type&&(s*=.05),"nuclear-thermal"===e.ksprfs.ksprfs_type&&(s*=4),e.ksprfs.ksprfs_engine_ffsc&&(s*=.5),n=s>0?s*(Math.pow(s/e.ksprfs.ksprfs_engine_mass/4e3),.25)*.5+50+70*e.ksprfs.ksprfs_engine_mass:0,e.ksprfs.engineCost=Math.round(n*r);var t=e.ksprfs.ksprfs_engine_ffsc?10:5;e.ksprfs.engineEntryCost=e.ksprfs.engineCost*t},e.defaultIgnitions=function(s){s.ksprfs.ksprfs_engine_ignitions=e.engineTypeConfigs[s.ksprfs.ksprfs_type][2],e.engineTypeConfigs[s.ksprfs.ksprfs_type][3]?s.ksprfs.ksprfs_engine_ignition_mode=2:s.ksprfs.ksprfs_engine_ignition_mode=1,e.doCalcs(s)},e.rcsDefault=function(s){s.ksprfs.ksprfs_engine_configs=e.rcsDefaultConfigs,s.ksprfs.ksprfs_engine_tech_level="1",s.ksprfs.ksprfs_engine_ispvm=1,s.ksprfs.ksprfs_engine_ispslm=1,s.ksprfs.ksprfs_engine_ignition_mode="0",s.ksprfs.ksprfs_engine_flow="STAGE_PRIORITY_FLOW",e.rcsMass(s)},e.rcsMass=function(s){s.ksprfs.ksprfs_rcs_nozzles||(s.ksprfs.ksprfs_rcs_nozzles=4),s.ksprfs.ksprfs_engine_mass=(s.ksprfs.ksprfs_rcs_nozzles*s.ksprfs.ksprfs_engine_thrust*6+5)/1e3,e.doCalcs(s)},e.displayTechLevel=function(e){var s=e.ksprfs.ksprfs_engine_tech_level;return"start"===s&&(s="0"),s},e.addConfig=function(e){e.ksprfs.ksprfs_engine_configs.push({config_mixture:0,config_ratio:0,config_tech_node:""})},e.removeConfig=function(e,s){e.ksprfs.ksprfs_engine_configs.splice(s,1)},e.changeTitle=function(e){var s=window.prompt("Change Title","");null!==s&&""!==s&&(e.title=s)},e.saveEngine=function(n){e.prepareSaveData(n);var r=[];e.successes=[],e.errors=[],angular.forEach(n.ksprfs,function(e,s){r.push({key:s,value:e})});var t="/wp-json/wp/v2/engines/";"undefined"!=typeof n.id&&(t+=n.id);var i={method:"PUT",url:t,transformResponse:function(e,s){return e},data:{ID:n.ID,title:n.title,ksprfs:r}};s(i).success(function(){e.successes.push("Engine saved!")}).error(function(){e.errors.push("Unable to save engine. Be sure you are logged in properly, and try again.")}),e.cleanData(n)},e.submitEngine=function(n){n.engineMod=window.prompt("Mod for this engine:",""),e.prepareSaveData(n);var r={method:"POST",url:"/engine-submit/",data:n};s(r).success(function(){e.successes.push("Engine submitted!")}).error(function(){e.errors.push("Unable to submit engine. Please try again.")}),e.cleanData(n)},e.createEngine=function(n){var r=[];e.successes=[],e.errors=[],angular.forEach(n.ksprfs,function(e,s){r.push({key:s,value:e})});var t={method:"POST",url:"/wp-json/wp/v2/engines",headers:{"X-WP-Nonce":nonce},data:{title:n.title.rendered,type:"engine",status:"publish",ksprfs:r}};s(t).success(function(){e.successes.push("Engine submitted!")}).error(function(){e.errors.push("Unable to submit engine. Please try again.")})},e.parseField=function(){e.parsed=angular.fromJson(e.engine),window.console.log(e.parsed)};var i=t.id;e.loading=!0;var p=[];if(e.engines.length<1){var f=s.get("/wp-json/wp/v2/engines/"+i).success(function(s){e.setEngine(s),e.cleanData(e.engine)});p.push(f)}else e.setEngine(e.getSingleEngine(i)),window.console.log(e.engine),e.cleanData(e.engine);if(e.mixtures.length<1){var f=s.get("/wp-json/wp/v2/mixtures/?filter[posts_per_page]=-1").success(function(s){e.setMixtures(s)});p.push(f)}if(e.types.length<1){var f=s.get("/wp-json/wp/v2/terms/engine-type/?per_page=0").success(function(s){e.setTypes(s)});p.push(f)}if(e.resources.length<1){var f=s.get("/wp-json/wp/v2/resources/?filter[posts_per_page]=-1").success(function(s){e.setResources(s)});p.push(f)}p.length>0?n.all(p).then(function(){e.loading=!1,e.doCalcs(e.engine)}):(e.loading=!1,e.doCalcs(e.engine))}]).controller("RFEngineListController",["$scope","$http","$q","$filter","$timeout","$window",function(e,s,n,r,t,i){e.currentPage=0,e.pageSize=20,e.loading=!0;if(e.mixtures.length<1&&s.get("/wp-json/wp/v2/mixtures/?filter[posts_per_page]=-1&filter[order]=ASC&filter[orderby]=title").success(function(s){e.setMixtures(s)}),e.enginesList.length<1){var p="/wp-json/wp/v2/engines/?filter[posts_per_page]=-1";s.get(p).success(function(s,n,r){angular.forEach(s,function(s,n){e.enginesList.push(e.prepareEngineList(s))}),e.setEngines(s),e.engineCount=r("X-WP-Total"),e.loading=!1})}else e.loading=!1;e.getMixture=function(s){return r("filter")(e.mixtures,function(e){return e.ID===s})},e.ceil=function(e){return Math.ceil(e)},e.checkPage=function(){t(function(){e.filteredEngines.length/e.pageSize<e.currentPage&&(e.currentPage=0)},200)}}]).controller("RFSingleModController",["$scope","$http","$q","$filter","$stateParams",function(e,s,n,r,t){e.engines.length<1?s.get("/wp-json/wp/v2/engines/?per-page=0&filter[engine_mod]="+t.slug).success(function(s){e.modEngines=s}):e.modEngines=r("filter")(e.engines,function(e){return 0!==e.ksprfs_taxonomy.engine_mod.length?e.ksprfs_taxonomy.engine_mod[0].slug===t.slug:void 0})}]).filter("startFrom",function(){return function(e,s){return s=+s,e.length<s?e.slice(0):e.slice(s)}});